{
  "SchemaDefinition": "./SwordfishInteroperabilityProfile.v1_1_0.json",
  "ProfileName": "SwordfishDiscovery",
  "ProfileVersion": "1.1.3",
  "OwningEntity": "SNIA.org",
  "Purpose": "Define requirements for discovery of resources and relationships that are common to all Swordfish conformant implementations.",
  "ContactInfo": "SNIA.org",
  "RequiredProfiles": {},
  "Registries": {
    "Features": {
      "MinVersion": "1.5.0",
      "Repository": "https://redfish.dmtf.org/profiles/swordfish",
      "SupportedFeatures": {
        "SNIA.Swordfish.Discovery": {}
      }
    }
  },
  "Protocol": {
    "MinVersion": "1.16.0"
  },
  "Resources": {
    "ServiceRoot": {
      "PropertyRequirements": {
        "Chassis": {
          "Purpose": "If Drives are used as capacity sources, these must be in Chassis/{ChassisId}/Drives.",
          "ReadRequirement": "IfImplemented"
        },
        "Storage": {},
        "Systems": {
          "Purpose": "If Storage is attached to a ComputerSystem rather than instantiated as a Standalone instance.",
          "ReadRequirement": "IfImplemented"
        },
        "StorageSystems": {
          "Purpose": "If Storage is attached to a ComputerSystem rather than instantiated as a Standalone instance.",
          "ReadRequirement": "IfImplemented"
        }
      }
    },
    "StorageCollection": {
      "PropertyRequirements": {
        "Members": {
          "MinCount": 1
        }
      }
    },
    "VolumeCollection": {},

    "Chassis": {
      "PropertyRequirements": {
        "Drives": {
          "ReadRequirement": "None",
          "ConditionalRequirements": [{
             "InstanceRequirements": "AnyOf",
             "SubordinateToResource": ["Chassis"],
             "Purpose": "If Drives provide the capacity source for the related Storage object, Drives are required to be in at least one Chassis representation.  As physical configurations can be represented by multiple Chassis instances, not all Chassis instances must include a Drives collection.",
             "ReadRequirement": "IfImplemented"
           }]
        }
      }
    },
    "Storage": {
      "PropertyRequirements": {
        "Volumes": {},
        "StoragePools": {
          "ReadRequirement": "IfImplemented",
          "Purpose": "StoragePools must be implemented in primary Storage object instances.  For Storage objects modeling embedded or back-end devices (e.g., NVMe drives), StoragePools are not required to be modeled."
        },
        "Drives": {
          "ReadRequirement": "Recommended",
          "ConditionalRequirements": [{
             "Purpose": "There are two requirements for Drives.  The first is encapsulated in a custom test, as it cannot be well specified in the profile language.  1: The implementation must choose at least one selected media container (appropriate for the system's selected media type) and instantiate a collection for it.  This may be instantiated as a CapacitySources structure to feed a StoragePool, FileSystem, or Volume.  When drives are used, the Drives Collection in either Storage or, when implementing the ClassOfService Feature, StorageServices shall be implemented. 2: When drives are used, the Drives Collection in Chassis shall be implemented.",
             "CompareType": "Present",
             "ReadRequirement": "Mandatory",
             "Comparison": "AnyOf",
             "CompareProperty": "/redfish/v1/Chassis/{ChassisId}/Drives"
           }]
        }
      }
    },
    "ComputerSystem": {
      "ReadRequirement": "IfImplemented",
      "PropertyRequirements": {
        "HostingRoles": {
          "Purpose": "Swordfish implementations must specify a hosting role type of StorageServer.",
          "Comparison": "AnyOf",
          "Values": ["StorageServer"]
        }
      }
    }
  }
}
