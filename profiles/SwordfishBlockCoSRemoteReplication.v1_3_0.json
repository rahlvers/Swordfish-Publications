{
  "SchemaDefinition": "./SwordfishInteroperabilityProfile.v1_1_0.json",
  "ProfileName": "SwordfishBlockCoSRemoteReplication",
  "ProfileVersion": "1.3.0",
  "OwningEntity": "SNIA.org",
  "Purpose": "Define remote replication block requirements for service-based Swordfish conformant implementations.",
  "ContactInfo": "SNIA.org",
  "RequiredProfiles": {
    "SwordfishCoSDiscovery": {
      "Repository": "https://redfish.dmtf.org/profiles/swordfish",
      "MinVersion": "1.2.0"
    },
    "SwordfishBlockProvisioning": {
      "Repository": "https://redfish.dmtf.org/profiles/swordfish",
      "MinVersion": "1.3.0"
    }
  },
  "Registries": {
    "Features": {
      "MinVersion": "1.6.0",
      "Repository": "https://redfish.dmtf.org/registries/swordfish/v1",
      "SupportedFeatures": {
        "SNIA.Swordfish.Block.CoSRemoteReplication": {}
      }
    }
  },
  "Resources": {
    "Volume": {
      "PropertyRequirements": {
        "ReplicaTargets": {
          "ReadRequirement": "IfImplemented",
          "ConditionalRequirements": [{
            "InstanceRequirements": "AnyOf",
            "SubordinateToResource": [ "StorageService" ],
            "Purpose": "At least one volume must exist defined as a replica target.",
            "ReadRequirement": "Mandatory"
          }]
        },

        "ReplicaInfo": {
          "ReadRequirement": "IfImplemented",
          "ConditionalRequirements": [{
            "InstanceRequirements": "AnyOf",
            "SubordinateToResource": [ "StorageService" ],
            "Purpose": "At least one volume must exist defined as a replica.",
            "ReadRequirement": "Mandatory"
          }],
          "PropertyRequirements": {
            "ReplicaType": {
              "ReadRequirement": "IfImplemented",
              "ConditionalRequirements": [{
                "InstanceRequirements": "AnyOf",
                "SubordinateToResource": [ "StorageService" ],
                "Purpose": "At least one volume must exist defined as a replica.",
                "ReadRequirement": "Mandatory"
              }]
            },
            "ReplicaFaultDomain": {
              "ReadRequirement": "IfImplemented",
              "ConditionalRequirements": [{
                "InstanceRequirements": "AnyOf",
                "SubordinateToResource": [ "StorageService" ],
                "ReadRequirement": "Mandatory"
              }],
              "Purpose": "The ReplicaFaultDomain type must be set to Remote.",
              "Comparison": "AnyOf",
              "Values": ["Remote"]
            }
          }
        }
      }
    },
    "StorageService": {
      "PropertyRequirements": {
        "Links": {
          "PropertyRequirements": {
            "DataProtectionLoSCapabilities": {
              "Purpose": "The Data Protection Line of Service must be supported. DataProtectionLoSCapabilities are a pre-requisite to the Line of Service."
            }
          }
        }
      }
    },
    "DataProtectionLineOfServiceCollection": {
      "ReadRequirement": "IfImplemented",
      "Purpose": "The Data Protection Line of Service must be supported.",
      "CreateResource": true,
      "DeleteResource": true,
      "PropertyRequirements": {
        "Members": {
          "MinCount": 0
        }
      }
    },
    "DataProtectionLineOfService": {
      "ActionRequirements": {
        "CreateReplicas": {
          "ReadRequirement": "Mandatory",
          "Purpose": "Ability to create an on-demand (ad-hoc) replica.",
          "Parameters": {
            "ReplicaLineOfService": {},
            "ReplicaRequests": {}
          }
        }
      }
    }
  }
}
